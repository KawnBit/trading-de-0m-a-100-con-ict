<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KawnBit Magazine: Estructura del Precio - Interactivo + IA (Robust)</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&family=Open+Sans:wght@400;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            /* Paleta de colores original */
            --primary-teal: #4db6ac;
            --secondary-teal: #00897b;
            --dark-teal: #005b4f;
            --accent-dark: #263238;
            --text-grey: #455a64;
            --light-bg: #f4f7f6;
            --white: #ffffff;
            --danger: #e57373;
            --danger-dark: #c62828;
            --gradient-teal: linear-gradient(135deg, var(--primary-teal), var(--secondary-teal));
            --chart-bg: #ffffff;
            --chart-grid: #f0f0f0;

            /* Colores IA */
            --ai-sparkle: #7c4dff;
            --ai-bg: #f3e5f5;
        }

        body {
            font-family: 'Open Sans', sans-serif;
            color: var(--text-grey);
            background-color: var(--light-bg);
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: 'Montserrat', sans-serif;
            color: var(--accent-dark);
            font-weight: 700;
        }

        h1 {
            font-size: 2.5rem;
            text-transform: uppercase;
            letter-spacing: -1px;
            color: var(--secondary-teal);
            margin-bottom: 0.5em;
            text-align: center;
        }

        h2 {
            font-size: 1.8rem;
            border-bottom: 3px solid var(--primary-teal);
            padding-bottom: 10px;
            margin-top: 40px;
            color: var(--dark-teal);
        }

        h3 {
            font-size: 1.4rem;
            color: var(--secondary-teal);
            margin-top: 30px;
        }

        strong {
            color: var(--secondary-teal);
            font-weight: 700;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: var(--white);
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
            position: relative;
            /* Para el z-index del contenido */
            z-index: 1;
        }

        /* Header del Magazine */
        .magazine-header {
            text-align: center;
            padding-bottom: 30px;
            border-bottom: 2px solid var(--light-bg);
            margin-bottom: 40px;
        }

        .logo-placeholder {
            font-family: 'Montserrat', sans-serif;
            font-weight: 800;
            font-size: 3rem;
            background: var(--gradient-teal);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: inline-block;
            margin-bottom: 10px;
        }

        .logo-tagline {
            font-family: 'Montserrat', sans-serif;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--secondary-teal);
            font-size: 0.9rem;
            font-weight: 600;
        }

        .intro-lead {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--accent-dark);
            border-left: 5px solid var(--primary-teal);
            padding-left: 20px;
            margin-bottom: 30px;
            font-style: italic;
        }

        /* Estilos para Cajas de Infografía/Gráficos */
        .infographic-box {
            background: var(--white);
            border-radius: 16px;
            padding: 30px;
            margin: 40px 0;
            border: 1px solid #e0e0e0;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease;
        }

        .infographic-box:hover {
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }

        .infographic-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 6px;
            background: var(--gradient-teal);
        }

        .infographic-title {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--dark-teal);
            display: flex;
            align-items: center;
            margin-bottom: 25px;
            background: #e0f2f1;
            padding: 10px 20px;
            border-radius: 50px;
            width: fit-content;
        }

        .infographic-title i {
            margin-right: 10px;
            font-size: 1.2rem;
            color: var(--secondary-teal);
        }

        /* Grids de comparación */
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .comparison-col {
            padding: 20px;
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .comparison-col:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .comparison-col h4 {
            margin-top: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Listas */
        ul {
            padding-left: 20px;
        }

        li {
            margin-bottom: 10px;
        }

        /* Footer */
        .main-footer {
            margin-top: 50px;
            padding: 30px 20px;
            border-top: 1px solid #ddd;
            text-align: center;
            background-color: #f8f9fa;
            border-radius: 12px;
        }

        .citation {
            font-size: 0.8rem;
            color: #999;
        }

        /* --- ESTILOS INTERACTIVOS --- */

        .interactive-stage {
            background-color: var(--chart-bg);
            border: 1px solid #eee;
            border-radius: 12px;
            padding: 20px;
            position: relative;
            min-height: 250px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .control-panel {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn-interactive {
            background: var(--white);
            border: 2px solid var(--secondary-teal);
            color: var(--secondary-teal);
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .btn-interactive:hover {
            background: var(--secondary-teal);
            color: var(--white);
        }

        .btn-interactive.active {
            background: var(--dark-teal);
            color: white;
            border-color: var(--dark-teal);
        }

        /* SVG & Charts */
        svg {
            max-width: 100%;
            height: auto;
        }

        .candle-body {
            stroke: #333;
            stroke-width: 1;
            transition: all 0.5s ease;
        }

        .candle-wick {
            stroke: #333;
            stroke-width: 1;
        }

        .bullish {
            fill: var(--primary-teal);
            stroke: var(--dark-teal);
        }

        .bearish {
            fill: var(--danger);
            stroke: var(--danger-dark);
        }

        /* Fractal Zoom */
        #fractal-container {
            width: 100%;
            height: 200px;
            position: relative;
            cursor: pointer;
        }

        .fractal-level {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.5s, transform 0.5s;
        }

        .hidden-level {
            opacity: 0;
            transform: scale(0.5);
            pointer-events: none;
        }

        /* Flip Card */
        .flip-container {
            perspective: 1000px;
            width: 100%;
            height: 250px;
            cursor: pointer;
        }

        .flipper {
            transition: 0.6s;
            transform-style: preserve-3d;
            position: relative;
            width: 100%;
            height: 100%;
        }

        .flip-container.flipped .flipper {
            transform: rotateY(180deg);
        }

        .front,
        .back {
            backface-visibility: hidden;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            box-sizing: border-box;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .front {
            background: #fff;
            border: 2px solid #eee;
        }

        .back {
            background: #e0f2f1;
            transform: rotateY(180deg);
            border: 2px solid var(--primary-teal);
        }

        /* --- ESTILOS IA & MENTOR --- */

        /* Botón flotante */
        .ai-fab {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #7c4dff, #448aff);
            border-radius: 50%;
            box-shadow: 0 4px 20px rgba(124, 77, 255, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            cursor: pointer;
            z-index: 1000;
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .ai-fab:hover {
            transform: scale(1.1);
        }

        /* Panel Lateral de IA */
        .ai-sidebar {
            position: fixed;
            top: 0;
            right: -400px;
            /* Oculto por defecto */
            width: 380px;
            height: 100vh;
            background: white;
            box-shadow: -5px 0 30px rgba(0, 0, 0, 0.1);
            z-index: 1001;
            transition: right 0.4s ease;
            display: flex;
            flex-direction: column;
            border-left: 1px solid #eee;
        }

        .ai-sidebar.open {
            right: 0;
        }

        .ai-header {
            padding: 20px;
            background: linear-gradient(135deg, #7c4dff, #448aff);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .ai-header h3 {
            margin: 0;
            color: white;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .close-ai {
            cursor: pointer;
            font-size: 1.2rem;
            opacity: 0.8;
        }

        .ai-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            background: #fafafa;
        }

        /* Chat Styles */
        .chat-message {
            max-width: 85%;
            padding: 12px 16px;
            border-radius: 12px;
            font-size: 0.9rem;
            line-height: 1.4;
            position: relative;
        }

        .chat-user {
            align-self: flex-end;
            background: #e3f2fd;
            color: #1565c0;
            border-bottom-right-radius: 2px;
        }

        .chat-ai {
            align-self: flex-start;
            background: white;
            border: 1px solid #e0e0e0;
            color: #333;
            border-bottom-left-radius: 2px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .chat-ai.loading {
            background: #f5f5f5;
            font-style: italic;
            color: #888;
        }

        .ai-input-area {
            padding: 15px;
            background: white;
            border-top: 1px solid #eee;
            display: flex;
            gap: 10px;
        }

        .ai-input {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 25px;
            outline: none;
            transition: border-color 0.2s;
        }

        .ai-input:focus {
            border-color: #7c4dff;
        }

        .ai-send {
            background: #7c4dff;
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ai-tabs {
            display: flex;
            background: #ede7f6;
            padding: 5px;
        }

        .ai-tab {
            flex: 1;
            text-align: center;
            padding: 10px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 600;
            color: #666;
            border-radius: 4px;
        }

        .ai-tab.active {
            background: white;
            color: #7c4dff;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        /* Quiz Styles */
        .quiz-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #eee;
            margin-bottom: 10px;
        }

        .quiz-option {
            display: block;
            padding: 8px 12px;
            margin: 5px 0;
            background: #f9f9f9;
            border: 1px solid #eee;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quiz-option:hover {
            background: #e3f2fd;
        }

        .quiz-option.correct {
            background: #c8e6c9;
            border-color: #81c784;
            color: #2e7d32;
        }

        .quiz-option.incorrect {
            background: #ffcdd2;
            border-color: #e57373;
            color: #c62828;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 2rem;
            }

            .comparison-grid {
                grid-template-columns: 1fr;
            }

            .ai-sidebar {
                width: 100%;
                right: -100%;
            }
        }
    </style>
</head>

<body>

    <div class="container">
        <header class="magazine-header">
            <div class="logo-placeholder">KawnBit</div>
            <div class="logo-tagline">Quantitative Trading Community</div>
        </header>

        <h1>Capítulo 3: Estructura del Precio</h1>

        <section>
            <h2>Introducción: La arquitectura invisible del mercado</h2>
            [cite_start]<p class="intro-lead">Imagina por un momento que el precio en los mercados financieros es como
                el agua fluyendo por un río[cite: 3]. [cite_start]A simple vista, puede parecer caótico y aleatorio,
                pero si observas con detenimiento descubrirás que sigue patrones predecibles, creando corrientes,
                remolinos y cambios de dirección que responden a una lógica profunda[cite: 4].</p>

            [cite_start]<p>La <strong>estructura del precio</strong> es precisamente esa lógica subyacente, el esqueleto
                invisible que sostiene todos los movimientos del mercado[cite: 5]. [cite_start]Para un trader
                principiante o intermedio, dominar la estructura del precio representa un salto cualitativo enorme[cite:
                6]. [cite_start]Es la diferencia entre operar basándose solo en indicadores superficiales y comprender
                verdaderamente por qué el precio se mueve como lo hace[cite: 7].</p>

            <div class="infographic-box">
                <div class="infographic-title"><i class="fas fa-map-signs"></i> Analogía Interactiva: Mapa vs. Terreno
                </div>
                <p style="text-align: center; margin-bottom: 15px; font-size: 0.9rem;">Haga clic en la tarjeta para
                    cambiar entre la visión superficial y la profunda.</p>

                <div class="flip-container" onclick="this.classList.toggle('flipped')">
                    <div class="flipper">
                        <!-- Frente: Mapa -->
                        <div class="front">
                            <i class="fas fa-map fa-4x"
                                style="color: var(--text-grey); opacity: 0.5; margin-bottom: 20px;"></i>
                            <h4>Seguir un mapa (2D)</h4>
                            [cite_start]<p style="text-align:center;">Te guía paso a paso, pero no entiendes el porqué
                                del camino[cite: 8].</p>
                            <span style="font-size: 0.8rem; color: var(--secondary-teal); margin-top: auto;"><i
                                    class="fas fa-sync"></i> Girar para ver la realidad</span>
                        </div>
                        <!-- Reverso: Terreno -->
                        <div class="back">
                            <i class="fas fa-mountain fa-4x" style="color: var(--dark-teal); margin-bottom: 20px;"></i>
                            <h4>Entender la topografía (3D)</h4>
                            [cite_start]<p style="text-align:center;">Te da verdadera comprensión del terreno y del
                                camino. Entiendes las pendientes y los peligros[cite: 8].</p>
                        </div>
                    </div>
                </div>
            </div>

            [cite_start]<p>Antes de entrar en materia, conviene recordar un principio fundamental en la metodología
                ICT/SMC: el precio solo hace dos cosas en su comportamiento — <strong>rebalancea</strong> (es decir,
                corrige desequilibrios previos) o <strong>busca liquidez</strong>[cite: 9, 394]. [cite_start]Toda
                oscilación del mercado puede entenderse dentro de una de esas dos acciones[cite: 10]. [cite_start]La
                estructura del precio nos ayuda a identificar cuándo el mercado está simplemente reequilibrándose en una
                consolidación y cuándo está yendo a cazar liquidez a niveles clave[cite: 11]. [cite_start]Con esta idea
                en mente, podremos desentrañar la “arquitectura invisible” del mercado con mayor claridad[cite: 12].</p>
        </section>

        <section>
            <h2>Fundamentos de la estructura del precio: más allá de las definiciones básicas</h2>

            <h3>La naturaleza fractal del precio</h3>
            [cite_start]<p>Antes de sumergirnos en tendencias y patrones, es crucial entender que el precio se comporta
                de manera fractal[cite: 15]. [cite_start]Esto significa que los mismos patrones que observas en un
                gráfico de 5 minutos se replican en gráficos horarios, diarios, semanales e incluso mensuales[cite: 16].
            </p>

            <div class="infographic-box">
                <div class="infographic-title"><i class="fas fa-search-plus"></i> Explorador Fractal Interactivo</div>
                <p style="text-align: center; margin-bottom: 20px;">La estructura se repite a distintas escalas.
                    [cite_start]Haga clic en el gráfico para hacer zoom dentro de la vela y ver su estructura
                    interna[cite: 17, 19].</p>

                <div class="interactive-stage" id="fractal-stage" style="background: #1e2528; color: white;">
                    <!-- Nivel 1: Diario -->
                    <div id="fractal-d1" class="fractal-level" onclick="zoomIn('d1')">
                        <div style="text-align: center;">
                            <span style="color: #bbb; font-size: 0.9rem;">Gráfico Diario (1 Vela)</span>
                            <svg width="100" height="150" viewBox="0 0 100 150">
                                <line x1="50" y1="10" x2="50" y2="140" stroke="white" stroke-width="2" />
                                <rect x="30" y="30" width="40" height="90" fill="var(--primary-teal)" stroke="white" />
                                <text x="50" y="80" text-anchor="middle" fill="white" font-size="12"
                                    font-weight="bold">D1</text>
                            </svg>
                            <p style="font-size: 0.8rem; margin-top: 10px; color: var(--primary-teal);">Click para ver
                                H1</p>
                        </div>
                    </div>

                    <!-- Nivel 2: H1 -->
                    <div id="fractal-h1" class="fractal-level hidden-level" onclick="zoomIn('h1')">
                        <div style="text-align: center; width: 80%;">
                            <span style="color: #bbb; font-size: 0.9rem;">Gráfico H1 (Estructura interna)</span>
                            <svg width="300" height="150" viewBox="0 0 300 150">
                                <!-- Trend path simulated with polyline -->
                                <polyline points="20,130 50,100 70,110 100,70 120,85 150,50 170,65 200,30 220,40 250,20"
                                    fill="none" stroke="var(--primary-teal)" stroke-width="3" />
                                <!-- Candles simplified -->
                                <rect x="45" y="100" width="10" height="20" fill="var(--primary-teal)" />
                                <rect x="95" y="70" width="10" height="30" fill="var(--primary-teal)" />
                                <rect x="145" y="50" width="10" height="25" fill="var(--primary-teal)" />
                                <rect x="195" y="30" width="10" height="20" fill="var(--primary-teal)" />
                            </svg>
                            <p style="font-size: 0.8rem; margin-top: 10px; color: var(--primary-teal);">Click para ver
                                M5</p>
                        </div>
                    </div>

                    <!-- Nivel 3: M5 -->
                    <div id="fractal-m5" class="fractal-level hidden-level">
                        <div style="text-align: center; width: 90%;">
                            <span style="color: #bbb; font-size: 0.9rem;">Gráfico M5 (Micro Estructura)</span>
                            <svg width="300" height="150" viewBox="0 0 300 150">
                                <!-- Micro noise -->
                                <path
                                    d="M10,140 Q30,130 40,120 T70,125 T100,100 T130,110 T160,80 T190,90 T220,60 T250,70 T290,40"
                                    fill="none" stroke="var(--secondary-teal)" stroke-width="1.5"
                                    stroke-dasharray="4" />
                            </svg>
                            <p style="font-size: 0.8rem; margin-top: 10px;">Máximo Zoom</p>
                        </div>
                    </div>

                    <button id="reset-fractal"
                        style="position: absolute; bottom: 10px; right: 10px; opacity: 0; pointer-events: none;"
                        class="btn-interactive" onclick="resetFractal()">
                        <i class="fas fa-search-minus"></i> Reset
                    </button>
                </div>

                [cite_start]<p style="margin-top: 20px;">Este principio fractal nos recuerda que ningún movimiento
                    ocurre aislado; siempre forma parte de una serie de oscilaciones más pequeñas y a la vez de una
                    serie de movimientos más grandes[cite: 21, 22]. [cite_start]La fractalidad nos arma con una ventaja:
                    podemos analizar la “misma” estructura a diferentes niveles[cite: 24].</p>
            </div>

            <h3>Tendencia alcista: la construcción de la fortaleza compradora</h3>
            [cite_start]<p>Una tendencia alcista no es simplemente “el precio sube”[cite: 26]. [cite_start]Es una
                arquitectura específica donde cada movimiento alcista construye sobre el anterior, creando una
                <strong>escalera ascendente</strong> en el gráfico[cite: 27]. [cite_start]Visualmente, una tendencia
                alcista saludable se caracteriza por <strong>máximos cada vez más altos y mínimos cada vez más
                    altos</strong>[cite: 28].</p>

            <div class="infographic-box" style="background: #e8f5e9; border-color: #a5d6a7;">
                <div class="infographic-title" style="background: #c8e6c9; color: #2e7d32;"><i
                        class="fas fa-arrow-trend-up"></i> Simulador de Tendencia</div>

                <div class="interactive-stage" style="background: white; border-color: #c8e6c9;">
                    <canvas id="trendCanvas" width="600" height="250" style="width: 100%; height: auto;"></canvas>
                    <div class="control-panel">
                        <button class="btn-interactive" onclick="drawTrend('bullish')"><i class="fas fa-arrow-up"></i>
                            Alcista (Bullish)</button>
                        <button class="btn-interactive" onclick="drawTrend('bearish')"><i class="fas fa-arrow-down"></i>
                            Bajista (Bearish)</button>
                    </div>
                </div>

                [cite_start]<p style="margin-top: 15px;">En la simulación alcista, observa cómo los <strong>máximos
                        crecientes (HH)</strong> rompen techos, y los <strong>mínimos crecientes (HL)</strong> defienden
                    el suelo ganado[cite: 30].</p>
                <div
                    style="background: white; padding: 15px; border-radius: 8px; margin-top: 15px; border-left: 4px solid #2e7d32;">
                    <i class="fas fa-hiking" style="color: #2e7d32; margin-right: 10px;"></i> <strong>Analogía del
                        Escalador:</strong> Piensa en cada mínimo creciente como un campamento base. [cite_start]Los
                    escaladores avanzan a un nuevo pico, retroceden para descansar (mínimo más alto), pero <strong>nunca
                        regresan tan abajo como el campamento anterior</strong>[cite: 31, 32, 33].
                </div>
            </div>

            [cite_start]<p>Este patrón de “dos pasos adelante, uno atrás” es la esencia de una tendencia alcista
                saludable y sostenible[cite: 35]. [cite_start]No obstante, no todos los máximos y mínimos dentro de una
                tendencia tienen la misma relevancia[cite: 36]. [cite_start]Los <strong>puntos de estructura
                    principales</strong> suelen ser aquellos niveles que han sido respetados múltiples veces o que han
                servido como puntos de inflexión significativos en el pasado[cite: 37]. [cite_start]Estos puntos clave
                actúan como “imanes” para el precio: son niveles de alta liquidez y alta atención[cite: 39].</p>
            [cite_start]<p>En resumen, esa estructura escalonada nos indica fortaleza de los compradores: mientras los
                mínimos sigan siendo crecientes, los “campamentos base” de los compradores permanecen intactos y la
                tendencia sigue vigente[cite: 42, 43].</p>

            <h3>Tendencia bajista: el dominio de los vendedores</h3>
            <p>La tendencia bajista es el reflejo inverso de la alcista. [cite_start]En una tendencia bajista saludable
                veremos <strong>máximos cada vez más bajos y mínimos cada vez más bajos</strong>[cite: 45, 46].
                [cite_start]Los vendedores van ganando terreno paso a paso: dejan techos cada vez más bajos y su presión
                empuja el precio a nuevos suelos[cite: 48].</p>

            <!-- (Se usa el mismo gráfico interactivo de arriba para la tendencia bajista) -->
            <p><em>Utiliza el simulador anterior en modo "Bajista" para visualizar esta estructura.</em></p>

            <div class="infographic-box" style="background: #ffebee; border-color: #ef9a9a;">
                <div
                    style="text-align: center; font-size: 1.2rem; font-weight: bold; color: #c62828; margin-bottom: 20px;">
                    Mínimo Más Bajo (LL) <i class="fas fa-arrow-down trend-arrow" style="color:#c62828"></i> Máximo Más
                    Bajo (LH) <i class="fas fa-arrow-down trend-arrow" style="color:#c62828"></i> Nuevo LL
                </div>
                [cite_start]<p>Una analogía útil es pensar en la tendencia bajista como <strong>una serie de avalanchas
                        controladas</strong>[cite: 49]. [cite_start]Cada máximo decreciente es un intento fallido de
                    detener la caída, y cada mínimo decreciente es un valle temporal que pronto será perforado[cite: 50,
                    51].</p>
                <div
                    style="background: white; padding: 15px; border-radius: 8px; margin-top: 15px; border-left: 4px solid #c62828;">
                    <i class="fas fa-bolt" style="color: #c62828; margin-right: 10px;"></i> <strong>Psicología del
                        Miedo:</strong> El miedo (ventas) tiende a ser más intenso y rápido que la codicia (compras).
                    [cite_start]Por eso, las tendencias bajistas a menudo se desarrollan con mayor velocidad y
                    violencia; las velas bajistas suelen ser más grandes y rápidas[cite: 52, 53, 55].
                </div>
            </div>

            [cite_start]<p>En una caída, el máximo más reciente que precede a un nuevo mínimo suele ser un nivel de
                resistencia clave: mientras el precio se mantenga por debajo de ese máximo previo, los vendedores
                mantienen el control[cite: 57]. [cite_start]Reconocer estos niveles principales nos ayuda a identificar
                zonas de posible giro o consolidación[cite: 60]. [cite_start]Mientras veamos máximos menores y mínimos
                menores, el sesgo sigue siendo bajista[cite: 62].</p>
        </section>

        <section>
            <h2>El cambio de estructura: el momento decisivo</h2>
            [cite_start]<p>Llegamos ahora al concepto quizás más crítico en el análisis de la estructura del precio: el
                cambio de estructura[cite: 65]. [cite_start]Este es el punto de inflexión donde el poder cambia de manos
                en el mercado[cite: 66]. [cite_start]Reconocerlo correctamente es vital para identificar giros de
                tendencia con antelación, pero es fácil confundir movimientos falsos con cambios auténticos[cite: 67,
                68].</p>

            <h3>Anatomía de un cambio de estructura verdadero</h3>
            [cite_start]<p>Un cambio de estructura verdadero requiere tres elementos fundamentales que deben ocurrir en
                secuencia[cite: 70].</p>

            <div class="infographic-box">
                <div class="infographic-title"><i class="fas fa-sync-alt"></i> Animación: Los 3 Pasos del Cambio
                    Estructural</div>

                <div class="interactive-stage" id="structure-stage">
                    <svg id="svg-structure" width="100%" height="200" viewBox="0 0 400 200" style="overflow: visible;">
                        <!-- Base grid line -->
                        <line x1="0" y1="150" x2="400" y2="150" stroke="#eee" stroke-width="1" />
                        <!-- Path placeholder -->
                        <path id="structure-path" fill="none" stroke="#ccc" stroke-width="2" />
                        <!-- Labels placeholder -->
                        <g id="structure-labels"></g>
                    </svg>

                    <div class="control-panel">
                        <button class="btn-interactive" onclick="animateStructureStep(1)">1. Ruptura</button>
                        <button class="btn-interactive" onclick="animateStructureStep(2)">2. Intención</button>
                        <button class="btn-interactive" onclick="animateStructureStep(3)">3. Confirmación</button>
                        <button class="btn-interactive" onclick="resetStructure()"
                            style="border-color: #999; color: #999;">Reiniciar</button>
                    </div>
                </div>

                <div style="margin-top: 20px; text-align: center;">
                    <p id="step-description" style="font-weight: 600; min-height: 3em;">Selecciona un paso para ver la
                        animación.</p>
                </div>
            </div>

            <h3>La trampa de los falsos cambios de estructura</h3>
            [cite_start]<p>Los mercados financieros, dominados por el dinero inteligente, están diseñados para engañar a
                la mayoría[cite: 96]. [cite_start]Los creadores de mercado saben dónde los minoristas colocan sus stop
                loss y órdenes de ruptura[cite: 97]. [cite_start]Por eso, es común ver aparentes cambios de estructura
                que resultan ser simples <strong>cazas de stops</strong> o falsos rompimientos[cite: 98].</p>

            <div class="infographic-box" style="background: #fff3e0; border-color: #ffb74d;">
                <div class="infographic-title" style="background: #ffe0b2; color: #e65100;"><i
                        class="fas fa-exclamation-triangle"></i> Simulador: La Emboscada de Liquidez</div>

                <div class="interactive-stage" style="background: #fff8e1; border-color: #ffcc80;">
                    <svg width="400" height="200" viewBox="0 0 400 200">
                        <!-- Resistance Line -->
                        <line x1="20" y1="80" x2="380" y2="80" stroke="#e65100" stroke-width="2"
                            stroke-dasharray="5,5" />
                        <text x="320" y="70" fill="#e65100" font-size="12">Resistencia Clave</text>

                        <!-- Liquidity area -->
                        <rect id="liquidity-pool" x="150" y="40" width="100" height="35" fill="rgba(230, 81, 0, 0.1)"
                            stroke="none" />
                        <text x="160" y="60" fill="#e65100" font-size="10" opacity="0.7">$$ Buy Stops $$</text>

                        <!-- Price Path Animated -->
                        <path id="fakeout-path" fill="none" stroke="#333" stroke-width="2" />
                        <circle id="price-ball" r="5" fill="#333" cx="0" cy="0" opacity="0" />
                    </svg>
                    <div class="control-panel">
                        <button class="btn-interactive" onclick="playFakeout()"
                            style="color: #e65100; border-color: #e65100;">
                            <i class="fas fa-play"></i> Ejecutar Trampa
                        </button>
                    </div>
                </div>

                [cite_start]<p style="margin-top: 15px;">Imagina un falso cambio como una
                    <strong>emboscada</strong>[cite: 99]. El precio parece romper un nivel importante, activando órdenes
                    de venta. [cite_start]Una vez ejecutadas esas órdenes (proporcionando liquidez a los grandes
                    operadores), el precio <strong>revierte rápidamente</strong> en la dirección original[cite: 100,
                    101].</p>
                [cite_start]<p>Los grandes jugadores llevan el precio allí momentáneamente para <strong>“barrer” esa
                        liquidez</strong> y luego retoman la tendencia original[cite: 106, 107]. [cite_start]Desde
                    fuera, en retrospectiva se ve claro: <strong>no era un cambio de estructura real, sino una toma de
                        liquidez</strong>[cite: 108].</p>
            </div>
        </section>

        <section>
            <h2>La distinción crítica: “el precio solo perfora” vs. “el precio desplaza y cambia”</h2>
            [cite_start]<p>En la terminología ICT, se hace una distinción poderosa entre una simple toma de liquidez y
                un cambio estructural efectivo[cite: 112].</p>

            <div class="comparison-grid">
                <div class="comparison-col" style="background: #fffde7; border-left: 4px solid #fbc02d;">
                    <h4><i class="fas fa-times-circle" style="color: #fbc02d;"></i> “El precio solo perfora” (Toma de
                        Liquidez)</h4>
                    [cite_start]<p>El precio únicamente atraviesa un nivel brevemente para capturar liquidez (stops),
                        pero <strong>no cambia realmente de estructura</strong>[cite: 113, 114, 118].</p>
                    <ul>
                        [cite_start]<li><strong>Penetración superficial:</strong> Rara vez excede un 10-15% más allá del
                            nivel[cite: 123].</li>
                        [cite_start]<li><strong>Sin continuación (follow-through):</strong> No hay múltiples velas
                            impulsando más allá; a menudo es solo una mecha larga[cite: 125, 126].</li>
                        [cite_start]<li><strong>Regreso rápido:</strong> Vuelve al rango previo, a menudo con una vela
                            de reversión clara[cite: 127].</li>
                        [cite_start]<li><strong>Estructura interna intacta:</strong> En temporalidades menores no se
                            observa un cambio de estructura completo[cite: 128, 131].</li>
                    </ul>
                </div>
                <div class="comparison-col" style="background: #e0f2f1; border-left: 4px solid var(--secondary-teal);">
                    <h4><i class="fas fa-check-circle" style="color: var(--secondary-teal);"></i> “El precio continúa y
                        desplaza” (Cambio Verdadero)</h4>
                    [cite_start]<p>El precio no solo rompe un nivel, sino que <strong>sigue corriendo en esa dirección
                            con fuerza</strong>, indicando un cambio fundamental en el equilibrio de poder[cite: 115,
                        135].</p>
                    <ul>
                        [cite_start]<li><strong>Movimiento decisivo:</strong> Velas con cuerpos sólidos que cierran bien
                            más allá del nivel, no solo mechas[cite: 138].</li>
                        [cite_start]<li><strong>Follow-through claro:</strong> Después de romper, el precio sigue
                            corriendo en esa dirección (ej. sigue haciendo mínimos más bajos)[cite: 140, 141].</li>
                        [cite_start]<li><strong>Estructura en temporalidades menores:</strong> En marcos pequeños sí se
                            observa una estructura completa formándose en la nueva dirección[cite: 142].</li>
                        [cite_start]<li><strong>Se establece:</strong> El precio no solo visita, sino que construye
                            nuevas estructuras y defiende las nuevas posiciones[cite: 145, 146].</li>
                    </ul>
                </div>
            </div>

            <h3>La importancia del desplazamiento: velocidad y fuerza como confirmación</h3>
            [cite_start]<p>Un desplazamiento genuino normalmente viene acompañado de <strong>velocidad</strong> y
                <strong>fuerza</strong>[cite: 149].</p>

            <div class="infographic-box">
                <div class="infographic-title"><i class="fas fa-tachometer-alt"></i> La Física del Desplazamiento</div>

                <div class="interactive-stage">
                    <!-- Velocity Bar -->
                    <div style="width: 100%; margin-bottom: 20px;">
                        <label>Velocidad del Movimiento</label>
                        <input type="range" id="speedRange" min="1" max="10" value="1" style="width: 100%;">
                    </div>
                    <!-- Strength Bar -->
                    <div style="width: 100%; margin-bottom: 20px;">
                        <label>Fuerza (Volumen)</label>
                        <input type="range" id="strengthRange" min="1" max="10" value="1" style="width: 100%;">
                    </div>

                    <canvas id="displacementCanvas" width="500" height="150"
                        style="background: #f9f9f9; border: 1px solid #ccc; width: 100%;"></canvas>

                    <button class="btn-interactive" onclick="simulateDisplacement()" style="margin-top: 15px;">Simular
                        Rompimiento</button>
                </div>

                <div style="display: flex; gap: 20px; margin-top: 20px;">
                    <div style="flex: 1;">
                        <h5><i class="fas fa-bolt" style="color: var(--secondary-teal);"></i> Velocidad (Urgencia)</h5>
                        <p>Qué tan rápido el precio se mueve. Un desplazamiento rápido indica urgencia[cite: 151, 152].
                        </p>
                    </div>
                    <div style="flex: 1;">
                        <h5><i class="fas fa-fist-raised" style="color: var(--dark-teal);"></i> Fuerza (Volumen)</h5>
                        <p>Capacidad de superar obstáculos. Un desplazamiento fuerte no se detiene ante
                            resistencias[cite: 154, 155, 156].</p>
                    </div>
                </div>

                <div style="margin-top: 20px; padding-top: 20px; border-top: 1px dashed #ccc;">
                    [cite_start]<p style="text-align: center; font-style: italic; color: var(--dark-teal);">“No solo
                        mires qué nivel rompió el precio, mira cómo lo rompió”[cite: 173].</p>
                </div>
            </div>
        </section>

        <section>
            <h2>Análisis multi-temporal: el cambio de estructura en temporalidades menores</h2>
            <p>Los mercados operan en múltiples dimensiones temporales simultáneamente. [cite_start]La regla general es
                que <strong>las temporalidades mayores dominan a las menores</strong>[cite: 180, 182]. La tendencia
                primaria de un marco grande actúa como contexto. [cite_start]Sin embargo, los cambios en temporalidades
                menores a menudo presagian o confirman cambios mayores inminentes, como las primeras grietas en una
                represa[cite: 184, 185, 186].</p>

            <h3>El proceso de confirmación en temporalidades menores</h3>
            [cite_start]<p>Un enfoque inteligente es: <strong>cuando sospeches de un cambio en un marco mayor, busca
                    confirmación en uno menor</strong>[cite: 191]. [cite_start]Esta confirmación multi-temporal es un
                pilar de la operativa de Smart Money: entrar solo cuando tanto el marco mayor como el menor alinean su
                mensaje[cite: 208].</p>

            <div class="infographic-box" style="background: #e3f2fd; border-color: #90caf9;">
                <div class="infographic-title" style="background: #bbdefb; color: #0d47a1;"><i
                        class="fas fa-clipboard-check"></i> Checklist de Confirmación Interactivo</div>
                <p>Si el precio rompe un soporte importante en H4, desciende a M15 y verifica:</p>

                <div style="background: white; padding: 20px; border-radius: 8px; margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 10px; cursor: pointer;">
                        <input type="checkbox" id="chk1" onchange="checkStatus()"> <strong>1. ¿Estructura acorde en
                            marco menor?</strong> <br><span style="font-size: 0.9rem; color: #666;">¿M15 hizo mínimos
                            decrecientes?[cite: 195, 196]</span>
                    </label>
                    <label style="display: block; margin-bottom: 10px; cursor: pointer;">
                        <input type="checkbox" id="chk2" onchange="checkStatus()"> <strong>2. ¿Hay rechazos claros
                            (test)?</strong> <br><span style="font-size: 0.9rem; color: #666;">¿Retrocedió y respetó el
                            nivel roto?[cite: 199, 200]</span>
                    </label>
                    <label style="display: block; margin-bottom: 10px; cursor: pointer;">
                        <input type="checkbox" id="chk3" onchange="checkStatus()"> <strong>3. ¿Volumen soporta el
                            movimiento?</strong> <br><span style="font-size: 0.9rem; color: #666;">¿Hay participación
                            real?[cite: 202, 205]</span>
                    </label>

                    <div id="status-result"
                        style="margin-top: 15px; padding: 10px; border-radius: 4px; text-align: center; font-weight: bold; background: #eee; color: #777;">
                        Esperando confirmaciones...
                    </div>
                </div>

                [cite_start]<p style="text-align: center; font-weight: bold;">Si todos estos chequeos apuntan en la
                    dirección de la ruptura, podemos estar más confiados de que el cambio es real[cite: 206].</p>
            </div>

            <h3>La trampa del sobre-análisis y la jerarquía</h3>
            [cite_start]<p>Con tantas informaciones, es fácil caer en la <strong>parálisis por análisis</strong> ante
                señales contradictorias[cite: 210, 211]. La clave está en mantener una <strong>jerarquía clara de
                    importancia</strong>. [cite_start]Tu sesgo principal debe venir siempre de los marcos mayores[cite:
                213, 214].</p>
            [cite_start]<p>Las temporalidades menores se usan como herramientas de confirmación y timing, no para
                contradecir lo que te dicen las mayores[cite: 215, 218]. [cite_start]Si la tendencia diaria es alcista,
                quizás ignores micro cambios bajistas en 5m a menos que rompan niveles clave del marco mayor[cite: 216].
            </p>
        </section>

        <section>
            <h2>Aplicación práctica: integrando todos los conceptos</h2>
            [cite_start]<p>La clave está en desarrollar un <strong>flujo de trabajo sistemático</strong> para analizar
                la estructura del precio cada vez que abrimos un gráfico[cite: 224].</p>

            <div class="infographic-box">
                <div class="infographic-title"><i class="fas fa-project-diagram"></i> Flujo de Trabajo del Análisis
                    Estructural</div>
                <div class="structure-step" style="background: var(--dark-teal); color: white; width: 22%;">
                    <span class="step-number" style="color: var(--primary-teal);">1</span>
                    <h5>Comienza por marcos mayores (Semanal/Diario)</h5>
                    <p>Identifica la estructura principal (tendencia o rango). [cite_start]Ubica los puntos de
                        estructura más importantes; estos serán tus pilares[cite: 227, 228, 231].</p>
                </div>
                <div class="structure-step" style="background: var(--secondary-teal); color: white; width: 22%;">
                    <span class="step-number" style="color: #b2dfdb;">2</span>
                    <h5>Desciende gradualmente (H4, H1, M15)</h5>
                    <p>Identifica la estructura local en cada marco y comprueba cómo encaja con la mayor.
                        [cite_start]Busca divergencias o alineaciones[cite: 233, 234].</p>
                </div>
                <div class="structure-step" style="background: var(--primary-teal); color: white; width: 22%;">
                    <span class="step-number" style="color: var(--dark-teal);">3</span>
                    <h5>Busca confluencia de señales</h5>
                    <p>Presta atención cuando múltiples temporalidades confluyen en una señal similar. [cite_start]Son
                        los escenarios de mayor convicción[cite: 238, 240].</p>
                </div>
                <div class="structure-step" style="background: #e0f2f1; width: 22%;">
                    <span class="step-number" style="color: var(--secondary-teal);">4</span>
                    <h5>Distingue ruido de señal</h5>
                    <p>Filtra fluctuaciones menores. [cite_start]Concéntrate en rupturas de niveles que realmente
                        importan y reconoce patrones de manipulación típicos[cite: 241, 243, 246].</p>
                </div>
            </div>

            <h3>Distinguiendo entre ruido y señal</h3>
            [cite_start]<p>El <strong>ruido</strong> es actividad que parece significativa pero no cambia la dinámica
                subyacente[cite: 254]. [cite_start]Para filtrar el ruido, enfócate en los <strong>puntos de estructura
                    verdaderamente significativos</strong>[cite: 257]:</p>
            <ul>
                [cite_start]<li><strong>Niveles probados múltiples veces:</strong> Un soporte que ha aguantado varios
                    ataques es más relevante[cite: 259].</li>
                [cite_start]<li><strong>Puntos de inflexión históricos:</strong> Altos o bajos notables desde donde
                    empezaron tendencias importantes[cite: 260].</li>
                [cite_start]<li><strong>Confluencia con niveles mayores:</strong> Números redondos o niveles de
                    Fibonacci de marco amplio[cite: 262].</li>
            </ul>
            <p>Si se rompe un nivel menor aislado, puede ser ruido. [cite_start]Cuando se rompe un level que “importa”,
                suele venir seguido de desplazamiento y confirmación (señal verdadera)[cite: 264, 265].</p>
        </section>

        <section>
            <h2>Psicología y estructura del precio</h2>
            [cite_start]<p>La estructura del precio es la manifestación visual de la psicología colectiva de todos los
                participantes del mercado[cite: 272, 273]. Para dominarla, es útil entender cómo piensa el trader
                institucional versus el minorista.</p>

            <div class="infographic-box">
                <div class="infographic-title"><i class="fas fa-brain"></i> Comparador de Mentalidad: Retail vs
                    Institucional</div>
                <div style="text-align: center; margin-bottom: 20px;">
                    <button class="btn-interactive" id="btn-retail" onclick="setMindset('retail')"
                        style="display:inline-block; margin: 0 10px;">Ver como Minorista</button>
                    <button class="btn-interactive" id="btn-smart" onclick="setMindset('smart')"
                        style="display:inline-block; margin: 0 10px;">Ver como Smart Money</button>
                </div>

                <div class="interactive-stage" style="background: white; border: none; padding: 0;">
                    <div id="mindset-display"
                        style="width: 100%; text-align: left; padding: 20px; border-radius: 12px; transition: all 0.5s;">
                        <!-- Contenido dinámico via JS -->
                    </div>
                </div>
            </div>

            <div class="comparison-grid">
                <div class="comparison-col" style="background: #f5f5f5; border-left: 4px solid #9e9e9e;">
                    <h4><i class="fas fa-user" style="color: #9e9e9e;"></i> Mentalidad Minorista</h4>
                    [cite_start]<p>Ven soportes y resistencias como barreras casi mágicas donde “el precio seguramente
                        rebotará”[cite: 279].</p>
                    [cite_start]<p><em>Pensamiento:</em> "Aquí hay un soporte fuerte, el precio rebotará, voy a
                        comprar"[cite: 282].</p>
                </div>
                <div class="comparison-col" style="background: #e0f2f1; border-left: 4px solid var(--dark-teal);">
                    <h4><i class="fas fa-user-tie" style="color: var(--dark-teal);"></i> Mentalidad Institucional (Smart
                        Money)</h4>
                    [cite_start]<p>Ven esos niveles como <strong>depósitos de liquidez</strong>: lugares donde se
                        acumulan órdenes pendientes (stops) de la multitud[cite: 281].</p>
                    [cite_start]<p><em>Pensamiento:</em> "Debajo de aquí hay muchos stop loss; esta es una oportunidad
                        para tomar liquidez barata antes de subir"[cite: 283, 285].</p>
                </div>
            </div>

            [cite_start]<p>Adoptar la mentalidad institucional significa preguntarse constantemente: “¿Dónde está la
                liquidez?” y “¿Dónde están los stops de la mayoría?”[cite: 287, 288]. [cite_start]Esto te lleva a
                anticipar tomas de liquidez y esperar el cambio de estructura real tras la trampa[cite: 289, 293].</p>
        </section>

        <section>
            <h2>El factor tiempo en la estructura</h2>
            <p>La dimensión temporal añade contexto vital. [cite_start]No solo importa qué niveles rompe el precio, sino
                <strong>cuánto tiempo le toma hacerlo</strong>[cite: 298, 299].</p>

            <div class="infographic-box">
                <div class="infographic-title"><i class="fas fa-hourglass-half"></i> El Tiempo como Filtro y Contexto
                </div>
                <ul>
                    <li><strong>Desarrollo lento vs. rápido:</strong> Una tendencia que construye con calma sus máximos
                        y mínimos durante semanas tiende a ser más sostenible. [cite_start]Un movimiento explosivo en
                        pocas horas es a menudo más frágil y propenso a reversiones rápidas[cite: 300, 302].</li>
                    <li><strong>Madurez de la tendencia:</strong> Reconocer la etapa temporal ayuda a ajustar
                        expectativas. [cite_start]Una tendencia madura suele perder momentum, con retrocesos más
                        profundos, comparada con una tendencia joven y agresiva[cite: 306, 307, 309].</li>
                    <li><strong>Temporalidad de confirmación:</strong> El tiempo actúa como filtro. Esperar al cierre de
                        una vela (ej. diaria) o a la formación de estructura en H1 para confirmar un rompimiento es
                        crucial. [cite_start]Dale tiempo al mercado para que te demuestre su intención real[cite: 313,
                        315].</li>
                </ul>
                [cite_start]<p style="text-align: center; font-weight: bold; color: var(--secondary-teal);">Un
                    movimiento genuino no solo se define por precio y volumen, sino también por su permanencia en el
                    tiempo[cite: 318].</p>
            </div>
        </section>

        <section>
            <h2>Errores comunes y cómo evitarlos</h2>
            [cite_start]<p>Incluso con buen entendimiento teórico, es fácil cometer errores al aplicar estos
                conceptos[cite: 320].</p>

            <div class="comparison-grid" style="grid-template-columns: 1fr 1fr 1fr;">
                <div class="comparison-col" style="background: #ffebee; border-top: 4px solid var(--danger);">
                    <h4><i class="fas fa-times-circle" style="color: var(--danger);"></i> Buscar la "Perfección
                        Estructural"</h4>
                    <p>Los mercados son desordenados. No esperes tendencias impecables de libro. Aprende a trabajar con
                        la imperfección y a entender la <strong>intención</strong> detrás del movimiento más que las
                        matemáticas exactas. [cite_start]Sé flexible pero con reglas claras[cite: 323, 324, 329, 330,
                        332].</p>
                </div>
                <div class="comparison-col" style="background: #ffebee; border-top: 4px solid var(--danger);">
                    <h4><i class="fas fa-times-circle" style="color: var(--danger);"></i> Sobrevalorar Temporalidades
                        Menores</h4>
                    <p>Un cambio en 1 minuto es irrelevante si el gráfico de 4 horas sigue igual. No te dejes llevar por
                        el "ruido de las pulgas cuando peleas con elefantes". [cite_start]Usa las menores para
                        precisión, no para dictar el sesgo principal[cite: 339, 341, 344, 349].</p>
                </div>
                <div class="comparison-col" style="background: #ffebee; border-top: 4px solid var(--danger);">
                    <h4><i class="fas fa-times-circle" style="color: var(--danger);"></i> Impaciencia con las
                        Confirmaciones</h4>
                    <p>Entrar antes de tiempo por miedo a perderse el movimiento suele ser receta para el desastre.
                        Desarrolla la disciplina de esperar tu conjunto completo de confirmaciones. [cite_start]La
                        consistencia en tu proceso es lo más importante[cite: 353, 356, 358, 362].</p>
                </div>
            </div>
        </section>

        <section>
            <h2>Conclusión: la maestría de la estructura como viaje continuo</h2>
            [cite_start]<p class="intro-lead" style="border-color: var(--secondary-teal);">Dominar la estructura del
                precio no es un destino final, sino un viaje continuo de observación, aprendizaje y refinamiento[cite:
                369].</p>
            [cite_start]<p>Estas herramientas son poderosas, pero su efectividad depende de la habilidad y experiencia
                del usuario; la práctica hace la diferencia[cite: 373, 374]. [cite_start]Se recomienda practicar
                identificando estructuras en múltiples mercados y temporalidades, y observando gráficos históricos para
                diferenciar engaños de movimientos genuinos[cite: 375, 376].</p>

            <div class="infographic-box" style="background: var(--gradient-teal); color: var(--white);">
                <div class="infographic-title" style="background: rgba(255,255,255,0.2); color: var(--white);"><i
                        class="fas fa-compass"></i> La Brújula del Mercado</div>
                <p style="color: var(--white);">La estructura del precio es el lenguaje del mercado. [cite_start]Tu
                    objetivo es convertirte en un lector fluido de ese lenguaje, capaz de entender no solo lo que el
                    precio dice, sino lo que está a punto de decir, viendo más allá del ruido superficial y reconociendo
                    los patrones que guían el flujo del capital institucional[cite: 381, 383, 384, 385].</p>
                [cite_start]<p style="text-align: center; font-weight: 800; margin-top: 20px; color: var(--white);">La
                    estructura del precio es nuestra guía interna, la brújula que nos orienta en el complejo mapa del
                    mercado[cite: 387].</p>
            </div>

            [cite_start]<p>Ahora tienes los planos del edificio; el siguiente paso es salir al mercado y observar cómo
                se construyen y se derriban esos muros en tiempo real[cite: 389, 390]. [cite_start]¡Buen trading y que
                la lectura de la estructura te acompañe en cada operación! [cite: 391]</p>
        </section>

        <footer class="main-footer">
            <div class="logo-placeholder" style="font-size: 2rem;">KawnBit</div>
            <p class="copyright">&copy; 2023 KawnBit Quantitative Trading Community. Todos los derechos reservados.</p>

            <div
                style="text-align: left; margin-top: 30px; font-size: 0.85rem; color: #777; border-top: 1px solid #eee; padding-top: 20px;">
                <strong>Fuentes y referencias:</strong><br>
                [cite_start]La elaboración de este capítulo se ha enriquecido con principios y enseñanzas de la
                comunidad ICT/SMC, complementados con material actualizado de fuentes confiables[cite: 392].
                [cite_start]Para profundizar, se recomienda revisar guías modernas sobre análisis de estructura de
                mercado y conceptos de Smart Money, donde se enfatiza iniciar el análisis en marcos temporales altos
                para detectar rupturas de estructura (BOS) o cambios de carácter (CHoCH) significativos [cite: 393,
                43][cite_start], y practicar mediante simulaciones avanzadas el reconocimiento de estos patrones en
                múltiples marcos temporales[cite: 393, 44]. [cite_start]Asimismo, estudios recientes destacan la
                importancia de distinguir rupturas genuinas de falsas rupturas analizando el contexto y confirmaciones
                adicionales [cite: 394, 24][cite_start], y recuerdan que según la teoría ICT el mercado continuamente
                alterna entre fases de balance y búsqueda de liquidez[cite: 394, 1]. [cite_start]Estas ideas refuerzan y
                dan respaldo teórico a todo lo expuesto a lo largo del capítulo[cite: 395].<br><br>
                <span class="citation">[1] Indice (2).docx; [2] [33] [43] [44] Trading de ICT en 2025: ¿Qué es el Inner
                    Circle Trading? forexter.com; [3]-[42] Cap 3_Estructura_precio_ict_trading (1).docx; [24] Estructura
                    de mercado y desplazamiento de la estructura de mercado (MSS) en Smart Money Concept | ATAS</span>
            </div>
        </footer>

    </div>

    <!-- IA FAB & Sidebar -->
    <div class="ai-fab" onclick="toggleAI()">
        <i class="fas fa-sparkles"></i>
    </div>

    <div class="ai-sidebar" id="aiSidebar">
        <div class="ai-header">
            <h3><i class="fas fa-robot"></i> KawnBit AI Assistant</h3>
            <i class="fas fa-times close-ai" onclick="toggleAI()"></i>
        </div>
        <div class="ai-tabs">
            <div class="ai-tab active" onclick="switchTab('mentor')" id="tab-mentor">Mentor de Trading</div>
            <div class="ai-tab" onclick="switchTab('quiz')" id="tab-quiz">Generador Quiz</div>
        </div>

        <!-- Contenido Mentor -->
        <div class="ai-content" id="content-mentor">
            <div class="chat-message chat-ai">
                Hola, soy tu mentor KawnBit con tecnología Gemini. Estoy entrenado con todo el contenido de este
                capítulo. ¿Tienes dudas sobre estructura, BOS o liquidez?
            </div>
        </div>

        <!-- Contenido Quiz -->
        <div class="ai-content" id="content-quiz" style="display:none;">
            <div style="text-align: center; padding: 20px;">
                <i class="fas fa-graduation-cap fa-3x" style="color: #7c4dff; margin-bottom: 15px;"></i>
                <p>Pon a prueba tus conocimientos sobre Estructura del Precio. La IA generará 3 preguntas únicas basadas
                    en el texto.</p>
                <button class="btn-interactive" onclick="generateQuiz()"
                    style="background: #7c4dff; color: white; border: none; margin-top: 10px;">
                    <i class="fas fa-magic"></i> Generar Test Ahora
                </button>
            </div>
            <div id="quiz-container"></div>
        </div>

        <!-- Input Area (solo visible en Mentor) -->
        <div class="ai-input-area" id="input-area">
            <input type="text" class="ai-input" id="user-input" placeholder="Pregunta sobre el capítulo..."
                onkeypress="handleEnter(event)">
            <button class="ai-send" onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <script>
        const proxyUrl = "/.netlify/functions/gemini-proxy";

        async function queryGemini(prompt, systemInstruction = "Eres un asistente útil.") {
            try {
                const response = await fetch(proxyUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: prompt }] }],
                        systemInstruction: { parts: [{ text: systemInstruction }] }
                    })
                });

                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);

                const data = await response.json();

                // Si el proxy devuelve el formato estándar de Gemini
                if (data.candidates && data.candidates[0]?.content?.parts?.[0]?.text) {
                    return data.candidates[0].content.parts[0].text;
                }
                // Si el proxy devuelve un campo "result" simplificado
                return data.result || "Error: No se recibió respuesta adecuada de la IA.";

            } catch (error) {
                console.error("Error Gemini Proxy:", error);
                return "⚠️ Error de conexión: Asegúrate de haber configurado la variable GEMINI_API_KEY en Netlify.";
            }
        }

        // --- Lógica del Chat Mentor ---
        const chatContent = document.getElementById('content-mentor');
        const userInput = document.getElementById('user-input');

        async function sendMessage() {
            const text = userInput.value.trim();
            if (!text) return;

            // User Msg
            appendMessage(text, 'user');
            userInput.value = '';

            // Loading Msg
            const loadingId = appendMessage('<i class="fas fa-circle-notch fa-spin"></i> Analizando el capítulo...', 'ai', true);

            // Contexto
            const chapterContext = `
            Eres un mentor experto en Trading Institucional (SMC/ICT). Responde preguntas basándote en el "Capítulo 3: Estructura del Precio" que el usuario está leyendo.
            Conceptos clave del texto:
            1. Fractalidad: Patrones se repiten en todas las temporalidades.
            2. Tendencia Alcista: HH (Higher Highs) y HL (Higher Lows). Analogía del escalador.
            3. Tendencia Bajista: LH (Lower Highs) y LL (Lower Lows). Analogía de avalanchas.
            4. Cambio de Estructura (BOS/CHoCH): Requiere ruptura, intención (velas grandes) y confirmación (pullback).
            5. Trampa de Liquidez: Falsos rompimientos para cazar stops. Diferencia entre "perforar" (mecha) y "desplazar" (cuerpo).
            6. Desplazamiento: Velocidad y fuerza (gaps).
            7. Análisis Multi-temporal: Marcos mayores dominan. Usar menores para confirmar.
            8. Psicología: Retail ve soportes, Institucional ve liquidez.
            Sé conciso, educativo y motivador. Usa emojis.
        `;

            const reply = await queryGemini(text, chapterContext);

            const loadingEl = document.getElementById(loadingId);
            loadingEl.innerHTML = formatText(reply);
            loadingEl.classList.remove('loading');
        }

        function appendMessage(text, sender, isLoading = false) {
            const div = document.createElement('div');
            div.className = `chat-message chat-${sender} ${isLoading ? 'loading' : ''}`;
            div.innerHTML = text;
            const id = 'msg-' + Date.now();
            div.id = id;
            chatContent.appendChild(div);
            chatContent.scrollTop = chatContent.scrollHeight;
            return id;
        }

        function formatText(text) {
            return text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\n/g, '<br>');
        }

        function handleEnter(e) {
            if (e.key === 'Enter') sendMessage();
        }

        // --- Lógica del Quiz Generativo (Robust Regex) ---
        async function generateQuiz() {
            const container = document.getElementById('quiz-container');
            container.innerHTML = '<div style="text-align:center; padding:20px; color:#7c4dff"><i class="fas fa-brain fa-spin fa-2x"></i><br>Gemini está creando preguntas únicas...</div>';

            const prompt = `
            Genera 3 preguntas de opción múltiple sobre "Estructura del Precio en Trading (SMC)".
            Devuelve SOLO un JSON válido con este formato:
            [
                {"q": "Pregunta", "options": ["A", "B", "C"], "correct": 0, "expl": "Explicación breve"}
            ]
        `;

            let rawResponse = await queryGemini(prompt);

            // Extracción Robusta de JSON usando Regex
            // Busca el primer array [...] ignorando texto previo/posterior
            const jsonMatch = rawResponse.match(/\[[\s\S]*\]/);

            if (!jsonMatch) {
                container.innerHTML = '<p style="color:red; text-align:center;">Error de formato en la respuesta de IA. Inténtalo de nuevo.</p>';
                return;
            }

            try {
                const questions = JSON.parse(jsonMatch[0]);
                renderQuiz(questions);
            } catch (e) {
                console.error(e);
                container.innerHTML = '<p style="color:red; text-align:center;">Error al procesar el quiz. Inténtalo de nuevo.</p>';
            }
        }

        function renderQuiz(questions) {
            const container = document.getElementById('quiz-container');
            container.innerHTML = '';

            questions.forEach((q, idx) => {
                const card = document.createElement('div');
                card.className = 'quiz-card';

                let optionsHtml = '';
                q.options.forEach((opt, optIdx) => {
                    optionsHtml += `<div class="quiz-option" onclick="checkAnswer(this, ${optIdx}, ${q.correct}, '${q.expl}')">${opt}</div>`;
                });

                card.innerHTML = `
                <p><strong>${idx + 1}. ${q.q}</strong></p>
                <div class="options-group">${optionsHtml}</div>
                <div class="feedback" style="display:none; margin-top:10px; font-size:0.9rem; color:#555;"></div>
            `;
                container.appendChild(card);
            });
        }

        function checkAnswer(el, selected, correct, explanation) {
            const parent = el.parentElement;
            const feedback = parent.nextElementSibling;
            Array.from(parent.children).forEach(child => child.style.pointerEvents = 'none'); // Disable clicks

            if (selected === correct) {
                el.classList.add('correct');
                feedback.innerHTML = `<i class="fas fa-check-circle" style="color:green"></i> ¡Correcto! ${explanation}`;
            } else {
                el.classList.add('incorrect');
                parent.children[correct].classList.add('correct');
                feedback.innerHTML = `<i class="fas fa-times-circle" style="color:red"></i> Incorrecto. ${explanation}`;
            }
            feedback.style.display = 'block';
        }

        // --- UI Logic ---
        function toggleAI() {
            document.getElementById('aiSidebar').classList.toggle('open');
        }

        function switchTab(tab) {
            document.querySelectorAll('.ai-tab').forEach(t => t.classList.remove('active'));
            document.getElementById('tab-' + tab).classList.add('active');

            document.getElementById('content-mentor').style.display = tab === 'mentor' ? 'flex' : 'none';
            document.getElementById('input-area').style.display = tab === 'mentor' ? 'flex' : 'none';
            document.getElementById('content-quiz').style.display = tab === 'quiz' ? 'block' : 'none';
        }

        // --- Lógica Original (Optimizada con Animation Frame Cancelling) ---

        // 1. Fractal Zoom
        function zoomIn(level) {
            if (level === 'd1') {
                document.getElementById('fractal-d1').classList.add('hidden-level');
                document.getElementById('fractal-h1').classList.remove('hidden-level');
                document.getElementById('reset-fractal').style.opacity = '1';
                document.getElementById('reset-fractal').style.pointerEvents = 'auto';
            } else if (level === 'h1') {
                document.getElementById('fractal-h1').classList.add('hidden-level');
                document.getElementById('fractal-m5').classList.remove('hidden-level');
            }
        }

        function resetFractal() {
            document.getElementById('fractal-m5').classList.add('hidden-level');
            document.getElementById('fractal-h1').classList.add('hidden-level');
            document.getElementById('fractal-d1').classList.remove('hidden-level');
            document.getElementById('reset-fractal').style.opacity = '0';
            document.getElementById('reset-fractal').style.pointerEvents = 'none';
        }

        // 2. Trend Simulator (Robust Canvas Animation)
        const trendCanvas = document.getElementById('trendCanvas');
        const trendCtx = trendCanvas.getContext('2d');
        let trendAnimId = null; // Variable para controlar la animación

        function drawTrend(type) {
            // Cancelar animación previa si existe
            if (trendAnimId) cancelAnimationFrame(trendAnimId);

            trendCtx.clearRect(0, 0, trendCanvas.width, trendCanvas.height);
            trendCtx.beginPath();
            trendCtx.strokeStyle = type === 'bullish' ? '#2e7d32' : '#c62828';
            trendCtx.lineWidth = 3;
            trendCtx.setLineDash([]); // Reset dash

            let points = [];
            if (type === 'bullish') {
                points = [
                    { x: 50, y: 200 }, { x: 150, y: 100 },
                    { x: 200, y: 150 },
                    { x: 300, y: 50 },
                    { x: 350, y: 100 },
                    { x: 500, y: 20 }
                ];
            } else {
                points = [
                    { x: 50, y: 50 }, { x: 150, y: 150 },
                    { x: 200, y: 100 },
                    { x: 300, y: 200 },
                    { x: 350, y: 150 },
                    { x: 500, y: 230 }
                ];
            }

            let currentPoint = 0;
            let progress = 0;

            trendCtx.moveTo(points[0].x, points[0].y);

            function animateLine() {
                if (currentPoint >= points.length - 1) return;

                let p1 = points[currentPoint];
                let p2 = points[currentPoint + 1];

                let x = p1.x + (p2.x - p1.x) * progress;
                let y = p1.y + (p2.y - p1.y) * progress;

                trendCtx.lineTo(x, y);
                trendCtx.stroke();

                progress += 0.03; // Velocidad ajustada

                if (progress >= 1) {
                    // Labels logic
                    trendCtx.fillStyle = '#333';
                    trendCtx.font = '14px Montserrat';
                    let label = '';
                    if (type === 'bullish') {
                        if ([2, 4].includes(currentPoint + 1)) label = "HL";
                        if ([1, 3, 5].includes(currentPoint + 1)) label = "HH";
                    } else {
                        if ([2, 4].includes(currentPoint + 1)) label = "LH";
                        if ([1, 3, 5].includes(currentPoint + 1)) label = "LL";
                    }
                    if (label) trendCtx.fillText(label, p2.x, p2.y - 10);

                    currentPoint++;
                    progress = 0;
                }
                trendAnimId = requestAnimationFrame(animateLine);
            }

            animateLine();
        }

        // Initial draw
        drawTrend('bullish');

        // 3. Structure Change Steps
        function animateStructureStep(step) {
            const path = document.getElementById('structure-path');
            const labels = document.getElementById('structure-labels');
            const desc = document.getElementById('step-description');

            labels.innerHTML = '';

            const d_step2 = "M20,150 L80,50 L120,100 L180,60 L220,90 L260,160";
            const d_step3 = "M20,150 L80,50 L120,100 L180,60 L220,90 L260,160 L300,120 L350,180";

            if (step === 1) {
                path.setAttribute('d', d_step2);
                path.style.strokeDasharray = "1000";
                path.style.strokeDashoffset = "0";
                desc.innerHTML = "1. <strong>Ruptura (BOS):</strong> El precio cae con fuerza rompiendo el último mínimo válido (HL). La estructura alcista se ha violado.";
                labels.innerHTML += '<text x="260" y="180" fill="#c62828" font-size="12">Ruptura (BOS)</text>';
                labels.innerHTML += '<line x1="220" y1="90" x2="350" y2="90" stroke="black" stroke-dasharray="2,2"/>';
            } else if (step === 2) {
                path.setAttribute('d', d_step2);
                desc.innerHTML = "2. <strong>Intención:</strong> Observa la longitud de la pierna bajista. Es un movimiento rápido y vertical, indicando que las instituciones están vendiendo agresivamente.";
                path.style.strokeWidth = "4";
                path.style.stroke = "#c62828";
            } else if (step === 3) {
                path.style.strokeWidth = "2";
                path.style.stroke = "#333";
                path.setAttribute('d', d_step3);
                desc.innerHTML = "3. <strong>Confirmación:</strong> El precio regresa suavemente (pullback) a la zona rota, encuentra resistencia, y continua cayendo. Entrada segura.";
                labels.innerHTML += '<circle cx="300" cy="120" r="5" fill="#4db6ac" />';
                labels.innerHTML += '<text x="290" y="100" fill="#4db6ac" font-size="12">Entrada</text>';
            }
        }

        function resetStructure() {
            const path = document.getElementById('structure-path');
            path.setAttribute('d', "M20,150 L80,50 L120,100 L180,60 L220,90");
            path.style.stroke = "#ccc";
            document.getElementById('structure-labels').innerHTML = '';
            document.getElementById('step-description').innerHTML = "Estructura alcista previa intacta. Esperando ruptura...";
        }
        resetStructure();

        // 4. Fakeout Animation (Robust Interval)
        let fakeoutInterval = null;

        function playFakeout() {
            // Limpiar intervalo anterior si existe
            if (fakeoutInterval) clearInterval(fakeoutInterval);

            const path = document.getElementById('fakeout-path');
            const ball = document.getElementById('price-ball');

            const fakeoutD = "M 50,120 L 100,90 L 140,110 L 160,50 L 170,45 L 180,150 L 350,160";
            path.setAttribute('d', fakeoutD);
            path.style.strokeDasharray = path.getTotalLength();
            path.style.strokeDashoffset = path.getTotalLength();

            let progress = 0;
            const totalLen = path.getTotalLength();

            path.style.transition = 'none';

            fakeoutInterval = setInterval(() => {
                progress += 5;
                path.style.strokeDashoffset = totalLen - progress;

                const point = path.getPointAtLength(progress);
                ball.setAttribute('cx', point.x);
                ball.setAttribute('cy', point.y);
                ball.style.opacity = 1;

                if (point.x > 150 && point.x < 200 && point.y < 80) {
                    document.getElementById('liquidity-pool').style.fill = "rgba(230, 81, 0, 0.5)";
                }

                if (progress >= totalLen) {
                    clearInterval(fakeoutInterval);
                    document.getElementById('liquidity-pool').style.fill = "rgba(230, 81, 0, 0.1)";
                }
            }, 20);
        }

        // 5. Displacement Simulator (Robust Animation)
        let dispAnimId = null;

        function simulateDisplacement() {
            if (dispAnimId) cancelAnimationFrame(dispAnimId); // Cancelar anterior

            const speed = document.getElementById('speedRange').value;
            const strength = document.getElementById('strengthRange').value;
            const cvs = document.getElementById('displacementCanvas');
            const ctx = cvs.getContext('2d');

            ctx.clearRect(0, 0, 500, 150);

            // Logic Vars
            let isWick = (speed < 5 && strength < 5);
            let barColor = isWick ? '#ffcc80' : '#00897b';
            let currentH = 0;
            let maxH = isWick ? 100 : 120;

            ctx.fillStyle = barColor;

            function animDisp() {
                currentH += (parseInt(speed) * 1.5);

                ctx.clearRect(0, 0, 500, 150);

                // Support Line
                ctx.beginPath(); ctx.moveTo(0, 100); ctx.lineTo(500, 100);
                ctx.strokeStyle = '#999'; ctx.setLineDash([5, 5]); ctx.stroke();

                // Previous candles
                ctx.fillStyle = '#ccc';
                ctx.fillRect(50, 80, 20, 20); ctx.fillRect(80, 90, 20, 10);

                ctx.fillStyle = barColor;

                if (currentH < maxH) {
                    ctx.fillRect(150, 70, 30, currentH);
                    dispAnimId = requestAnimationFrame(animDisp);
                } else {
                    if (isWick) {
                        ctx.fillRect(163, 70, 4, 100);
                        ctx.fillRect(150, 70, 30, 25);
                        ctx.fillStyle = "black";
                        ctx.fillText("Solo Perfora (SFP)", 200, 50);
                    } else {
                        ctx.fillRect(150, 70, 30, 120);
                        ctx.fillStyle = "black";
                        ctx.fillText("¡DESPLAZAMIENTO REAL!", 200, 50);
                    }
                }
            }
            animDisp();
        }

        // 6. Checklist Logic
        function checkStatus() {
            const c1 = document.getElementById('chk1').checked;
            const c2 = document.getElementById('chk2').checked;
            const c3 = document.getElementById('chk3').checked;
            const res = document.getElementById('status-result');

            if (c1 && c2 && c3) {
                res.style.background = "#c8e6c9";
                res.style.color = "#2e7d32";
                res.innerHTML = '<i class="fas fa-check-circle"></i> CONFIRMADO: Alta probabilidad de éxito.';
            } else if (c1 || c2 || c3) {
                res.style.background = "#fff9c4";
                res.style.color = "#fbc02d";
                res.innerHTML = "Análisis en progreso... Faltan confirmaciones.";
            } else {
                res.style.background = "#eee";
                res.innerHTML = "Esperando confirmaciones...";
            }
        }

        // 7. Mindset Switcher
        function setMindset(type) {
            const display = document.getElementById('mindset-display');
            const btnR = document.getElementById('btn-retail');
            const btnS = document.getElementById('btn-smart');

            if (type === 'retail') {
                display.style.background = "#f5f5f5";
                display.style.borderLeft = "5px solid #9e9e9e";
                display.innerHTML = `
                <h4 style="color:#666"><i class="fas fa-user"></i> Visión Minorista</h4>
                <div style="height:100px; border-bottom:2px solid black; position:relative;">
                    <div style="position:absolute; bottom:0; left:20px; width:20px; height:60px; background:#ccc;"></div>
                    <div style="position:absolute; bottom:0; left:60px; width:20px; height:60px; background:#ccc;"></div>
                    <span style="position:absolute; bottom:-25px; left:40px; color:black; font-weight:bold;">SOPORTE FUERTE</span>
                </div>
                <p>"¡Mira cuántos toques! Es un suelo de hormigón. Pondré mi Stop Loss justo debajo."</p>
            `;
                btnR.classList.add('active');
                btnS.classList.remove('active');
            } else {
                display.style.background = "#e0f2f1";
                display.style.borderLeft = "5px solid #00897b";
                display.innerHTML = `
                <h4 style="color:#00897b"><i class="fas fa-user-tie"></i> Visión Smart Money</h4>
                <div style="height:100px; border-bottom:2px solid #00897b; position:relative;">
                    <div style="position:absolute; bottom:0; left:20px; width:20px; height:60px; background:#b2dfdb;"></div>
                    <div style="position:absolute; bottom:0; left:60px; width:20px; height:60px; background:#b2dfdb;"></div>
                    <span style="position:absolute; bottom:-30px; left:10px; color:#c62828; font-weight:bold;">$$$ LIQUIDEZ $$$</span>
                    <i class="fas fa-arrow-down" style="position:absolute; bottom:-50px; left:50px; color:#c62828;"></i>
                </div>
                <p>"Hay millones de dólares en Stops debajo de esa línea. Vamos a empujar el precio ahí para llenar nuestras órdenes de compra."</p>
            `;
                btnS.classList.add('active');
                btnR.classList.remove('active');
            }
        }
        setMindset('retail');

    </script>

</body>

</html>